<!Doctype HTML>
<html>
	<head>
		<title>Agenda virtual</title>
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
	</head>
	<body>
		<div class="mt-4 p-5 bg-primary text-white rounded">
			<h1>Agenda pessoal</h1>
			<p id="nome"></p>
		</div>
		<div class="container-fluid row mb-3 mt-1">
			<div class="col-md-3 bg-light">
				<nav class="navbar bg-light">
					<ul class="navbar-nav">
						<li class="navitem">
							<a class="nav-link" href="index.html">Ver contatos</a>
						</li>
						<li class="navitem">
							<a class="nav-link" href="cadastro.html">Cadastrar contato</a>
						</li>
						<li class="navitem">
							<a class="nav-link" href="busca.html">Buscar contatos</a>
						</li>
						<li class="navitem">
							<a class="nav-link" href="#" onclick="return sair()">Sair</a>
						</li>
					</ul>
				</nav>
			</div>
			<div class="col-md-9">
				<p id="mensagem" class="bg-primary text-white p-3 mb-3 mt-3"> Nenhum contato cadastrado</p>
				<table class="table table-hover" id="tabela">
					<tbody id="corpoTabela">
						<tr>
							<th>Nome </th>
							<th>E-mail </th>
							<th>Telefone </th>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
		<script>
			if(localStorage.getItem('nome') == null){
				var nome = prompt('Informe seu nome');
				localStorage.setItem('nome',nome);
			}
			let n = localStorage.getItem('nome');
			document.getElementById('nome').innerHTML = n;
			
			let c = localStorage.getItem('contatos');
			if(c == null){
				document.getElementById('tabela').style.display='none';
			}else{
				document.getElementById('mensagem').style.display='none';
				tabela = document.getElementById('corpoTabela');
				contatos = JSON.parse(c);
				contatos.forEach(function(con){
					linha = document.createElement('tr');
					
					tdNome = document.createElement('td');
					noNome = document.createTextNode(con.nome);
					tdNome.appendChild(noNome);
					
					tdEmail = document.createElement('td');
					noEmail = document.createTextNode(con.email);
					tdEmail.appendChild(noEmail);
					
					tdTelefone = document.createElement('td');
					noTelefone = document.createTextNode(con.telefone);
					tdTelefone.appendChild(noTelefone);
					
					linha.appendChild(tdNome);
					linha.appendChild(tdEmail);
					linha.appendChild(tdTelefone);
					tabela.appendChild(linha);
				});
			}
			function sair(){
				if(confirm('Deseja realmente excluir os dados?')){
					localStorage.clear();
					location.href = "index.html";
				}
				return false;
			}
		</script>
	</body>
</html>
